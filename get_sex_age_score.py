## logs/none_7datasets_decoder88Mix_attrFC_v3.log
Fold1='\
Dataset: taowu [Accuracy, F1 Score, Prec, Rec]:(y) [1.0, 1.0, 1.0, 1.0], 	(sex) [1.0, 1.0, 1.0, 1.0], 	(age) [-1, -25.550518035888672, -1, -1], 	\n\
Dataset: adni [Accuracy, F1 Score, Prec, Rec]:(y) [0.9259259259259259, 0.9088888888888889, 0.9316239316239316, 0.9259259259259259], 	(sex) [0.5925925925925926, 0.5925925925925926, 0.6074074074074074, 0.5925925925925926], 	(age) [-1, -60.03174591064453, -1, -1], 	\n\
Dataset: ppmi [Accuracy, F1 Score, Prec, Rec]:(y) [0.47619047619047616, 0.43809523809523804, 0.6095238095238096, 0.47619047619047616], 	(sex) [0.8095238095238095, 0.8086580086580087, 0.8227513227513228, 0.8095238095238095], 	(age) [-1, -199.14987182617188, -1, -1], 	\n\
Dataset: abide [Accuracy, F1 Score, Prec, Rec]:(y) [0.6699029126213593, 0.6626793931697459, 0.685254854368932, 0.6699029126213593], 	(sex) [0.95, 0.9454054054054055, 0.9462765957446808, 0.95], 	(age) [-1, -51.2373046875, -1, -1], 	\n\
Dataset: neurocon [Accuracy, F1 Score, Prec, Rec]:(y) [0.4, 0.52, 1.0, 0.4], 	(sex) [1.0, 1.0, 1.0, 1.0], 	(age) [-1, -351.042724609375, -1, -1], 	\n\
Dataset: hcpa [Accuracy, F1 Score, Prec, Rec]:(y) [0.9488752556237219, 0.9560387348667442, 0.9641309850169429, 0.9488752556237219], 	(sex) [0.7564234326824255, 0.7564141691124097, 0.7564192891277669, 0.7564234326824255], 	(age) [-1, -112.727294921875, -1, -1], 	\n\
Dataset: hcpya [Accuracy, F1 Score, Prec, Rec]:(y) [0.93026941362916, 0.9350697083191245, 0.9409013770923041, 0.93026941362916], 	(sex) [0.722662440570523, 0.7220768903454451, 0.7221086107096809, 0.722662440570523], 	(age) [-1, -14.205801010131836, -1, -1], 	\n\
'
Fold2='\
Dataset: taowu [Accuracy, F1 Score, Prec, Rec]:(y) [1.0, 1.0, 1.0, 1.0], 	(sex) [0.75, 0.7666666666666667, 0.875, 0.75], 	(age) [-1, -27.16339683532715, -1, -1], 	\n\
Dataset: adni [Accuracy, F1 Score, Prec, Rec]:(y) [0.9259259259259259, 0.9088888888888889, 0.9316239316239316, 0.9259259259259259], 	(sex) [0.7407407407407407, 0.7428863346104725, 0.7633292633292633, 0.7407407407407407], 	(age) [-1, -52.95337677001953, -1, -1], 	\n\
Dataset: ppmi [Accuracy, F1 Score, Prec, Rec]:(y) [0.6666666666666666, 0.7222222222222222, 0.9285714285714286, 0.6666666666666666], 	(sex) [0.7619047619047619, 0.760815081181214, 0.7632275132275133, 0.7619047619047619], 	(age) [-1, -61.82086944580078, -1, -1], 	\n\
Dataset: abide [Accuracy, F1 Score, Prec, Rec]:(y) [0.7378640776699029, 0.738310350875421, 0.7400073273493314, 0.7378640776699029], 	(sex) [0.8969072164948454, 0.8814823492658543, 0.8817265209017786, 0.8969072164948454], 	(age) [-1, -24.638296127319336, -1, -1], 	\n\
Dataset: neurocon [Accuracy, F1 Score, Prec, Rec]:(y) [0.75, 0.6428571428571428, 0.5625, 0.75], 	(sex) [1.0, 1.0, 1.0, 1.0], 	(age) [-1, -170.18447875976562, -1, -1], 	\n\
Dataset: hcpa [Accuracy, F1 Score, Prec, Rec]:(y) [0.9755102040816327, 0.9763609700112172, 0.9774308226648738, 0.9755102040816327], 	(sex) [0.7050359712230215, 0.7015877317765763, 0.7024390601711127, 0.7050359712230215], 	(age) [-1, -115.83731842041016, -1, -1], 	\n\
Dataset: hcpya [Accuracy, F1 Score, Prec, Rec]:(y) [0.9481481481481482, 0.9517964922078779, 0.9556612883510573, 0.9481481481481482], 	(sex) [0.7111111111111111, 0.7112854030501089, 0.7114878497330691, 0.7111111111111111], 	(age) [-1, -11.364702224731445, -1, -1], 	\n\
'
Fold3='\
Dataset: taowu [Accuracy, F1 Score, Prec, Rec]:(y) [0.5, 0.5416666666666666, 0.875, 0.5], 	(sex) [0.75, 0.7666666666666667, 0.875, 0.75], 	(age) [-1, -3.838911533355713, -1, -1], 	\n\
Dataset: adni [Accuracy, F1 Score, Prec, Rec]:(y) [0.7777777777777778, 0.7704826038159373, 0.7906602254428342, 0.7777777777777778], 	(sex) [0.7777777777777778, 0.7777777777777778, 0.7777777777777778, 0.7777777777777778], 	(age) [-1, -55.99851608276367, -1, -1], 	\n\
Dataset: ppmi [Accuracy, F1 Score, Prec, Rec]:(y) [0.6190476190476191, 0.6452732817264837, 0.7707482993197278, 0.6190476190476191], 	(sex) [0.8095238095238095, 0.8027210884353742, 0.8126984126984127, 0.8095238095238095], 	(age) [-1, -152.16246032714844, -1, -1], 	\n\
Dataset: abide [Accuracy, F1 Score, Prec, Rec]:(y) [0.6796116504854369, 0.6915470916607626, 0.7065657396741813, 0.6796116504854369], 	(sex) [0.8613861386138614, 0.8578698311007571, 0.8553073912042367, 0.8613861386138614], 	(age) [-1, -63.54804611206055, -1, -1], 	\n\
Dataset: neurocon [Accuracy, F1 Score, Prec, Rec]:(y) [1.0, 1.0, 1.0, 1.0], 	(sex) [1.0, 1.0, 1.0, 1.0], 	(age) [-1, -84.23099517822266, -1, -1], 	\n\
Dataset: hcpa [Accuracy, F1 Score, Prec, Rec]:(y) [0.9661538461538461, 0.9685032126972245, 0.9712310995871588, 0.9661538461538461], 	(sex) [0.7481789802289281, 0.7451337000913191, 0.7456561804985272, 0.7481789802289281], 	(age) [-1, -144.43113708496094, -1, -1], 	\n\
Dataset: hcpya [Accuracy, F1 Score, Prec, Rec]:(y) [0.9315866084425036, 0.9429793284961847, 0.9565943448548295, 0.9315866084425036], 	(sex) [0.7045123726346434, 0.7049521786633524, 0.7099372705545454, 0.7045123726346434], 	(age) [-1, -13.247895240783691, -1, -1], 	\n\
'
Fold4='\
Dataset: taowu [Accuracy, F1 Score, Prec, Rec]:(y) [0.75, 0.6428571428571428, 0.5625, 0.75], 	(sex) [1.0, 1.0, 1.0, 1.0], 	(age) [-1, -80.80914306640625, -1, -1], 	\n\
Dataset: adni [Accuracy, F1 Score, Prec, Rec]:(y) [0.7, 0.7200000000000001, 0.773913043478261, 0.7], 	(sex) [0.7333333333333333, 0.7079365079365079, 0.7583333333333333, 0.7333333333333333], 	(age) [-1, -38.768253326416016, -1, -1], 	\n\
Dataset: ppmi [Accuracy, F1 Score, Prec, Rec]:(y) [0.5238095238095238, 0.4898989898989899, 0.6793650793650793, 0.5238095238095238], 	(sex) [0.8095238095238095, 0.8121693121693122, 0.8294372294372294, 0.8095238095238095], 	(age) [-1, -71.56157684326172, -1, -1], 	\n\
Dataset: abide [Accuracy, F1 Score, Prec, Rec]:(y) [0.6990291262135923, 0.7001707890823884, 0.7045979117054406, 0.6990291262135923], 	(sex) [0.8823529411764706, 0.8758620689655173, 0.8738115816767502, 0.8823529411764706], 	(age) [-1, -47.185916900634766, -1, -1], 	\n\
Dataset: neurocon [Accuracy, F1 Score, Prec, Rec]:(y) [0.5, 0.6666666666666666, 1.0, 0.5], 	(sex) [1.0, 1.0, 1.0, 1.0], 	(age) [-1, -61.278202056884766, -1, -1], 	\n\
Dataset: hcpa [Accuracy, F1 Score, Prec, Rec]:(y) [0.964984552008239, 0.9673001875644212, 0.9698424625405215, 0.964984552008239], 	(sex) [0.7229660144181257, 0.723124481749739, 0.7232968341085887, 0.7229660144181257], 	(age) [-1, -124.26358795166016, -1, -1], 	\n\
Dataset: hcpya [Accuracy, F1 Score, Prec, Rec]:(y) [0.9341500765696784, 0.9423589792865695, 0.9513289010905287, 0.9341500765696784], 	(sex) [0.7595712098009189, 0.7590708853809816, 0.7586619390861573, 0.7595712098009189], 	(age) [-1, -14.925091743469238, -1, -1], 	\n\
'
Fold5='\
Dataset: taowu [Accuracy, F1 Score, Prec, Rec]:(y) [1.0, 1.0, 1.0, 1.0], 	(sex) [1.0, 1.0, 1.0, 1.0], 	(age) [-1, -11.797513961791992, -1, -1], 	\n\
Dataset: adni [Accuracy, F1 Score, Prec, Rec]:(y) [0.8148148148148148, 0.8065843621399176, 0.8011272141706924, 0.8148148148148148], 	(sex) [0.7777777777777778, 0.7777777777777778, 0.7777777777777778, 0.7777777777777778], 	(age) [-1, -23.78237533569336, -1, -1], 	\n\
Dataset: ppmi [Accuracy, F1 Score, Prec, Rec]:(y) [0.8095238095238095, 0.7922077922077922, 0.8809523809523809, 0.8095238095238095], 	(sex) [0.7142857142857143, 0.7142857142857143, 0.7142857142857143, 0.7142857142857143], 	(age) [-1, -50.19095230102539, -1, -1], 	\n\
Dataset: abide [Accuracy, F1 Score, Prec, Rec]:(y) [0.7281553398058253, 0.7389421936243109, 0.7500742616825352, 0.7281553398058253], 	(sex) [0.8041237113402062, 0.8061468783774911, 0.8083601151967945, 0.8041237113402062], 	(age) [-1, -47.28983688354492, -1, -1], 	\n\
Dataset: neurocon [Accuracy, F1 Score, Prec, Rec]:(y) [0.75, 0.6428571428571428, 0.5625, 0.75], 	(sex) [1.0, 1.0, 1.0, 1.0], 	(age) [-1, -200.03016662597656, -1, -1], 	\n\
Dataset: hcpa [Accuracy, F1 Score, Prec, Rec]:(y) [0.9676746611053181, 0.9697819247934095, 0.9719482355464717, 0.9676746611053181], 	(sex) [0.7710084033613446, 0.7709331597936435, 0.7708852215210139, 0.7710084033613446], 	(age) [-1, -127.00210571289062, -1, -1], 	\n\
Dataset: hcpya [Accuracy, F1 Score, Prec, Rec]:(y) [0.9273570324574961, 0.9359947671499083, 0.9453133247843925, 0.9273570324574961], 	(sex) [0.7171561051004637, 0.7139809641236372, 0.721477088568502, 0.7171561051004637], 	(age) [-1, -10.766571998596191, -1, -1], 	\n\
'

import numpy as np

# def y_score(fold):
#     fold = fold.split('\n')[:-1]
#     dns = []
#     scores = []
#     for line in fold:
#         dn = line.split(' [Accuracy, F1 Score, Prec, Rec]')[0][9:]
#         score = line.split('(y) ')[1].split(', 	')[0]
#         dns.append(dn)
#         scores.append(float(score[1:-1].split(', ')[1])*100)
#     print(dns)
#     # return np.mean(scores), np.std(scores)
#     return scores

# def sex_score(fold):
#     fold = fold.split('\n')[:-1]
#     dns = []
#     scores = []
#     for line in fold:
#         dn = line.split(' [Accuracy, F1 Score, Prec, Rec]')[0][9:]
#         score = line.split('(sex) ')[1].split(', 	')[0]
#         dns.append(dn)
#         scores.append(float(score[1:-1].split(', ')[1])*100)
#     return scores


# def age_mse(fold):
#     fold = fold.split('\n')[:-1]
#     dns = []
#     scores = []
#     for line in fold:
#         dn = line.split(' [Accuracy, F1 Score, Prec, Rec]')[0][9:]
#         score = line.split('(age) ')[1].split(', 	')[0]
#         dns.append(dn)
#         scores.append(np.sqrt(-1*float(score[1:-1].split(', ')[1])))
#     return scores
# avg = []
# std = []
# for scores in zip(y_score(Fold1), y_score(Fold2), y_score(Fold3), y_score(Fold4), y_score(Fold5)):
#     avg.append(np.mean(scores))
#     std.append(np.std(scores))
#     print(np.mean(scores), np.std(scores))

# print(f'{np.mean(avg):.2f}'+'$_{\pm'+f'{np.mean(std):.2f}'+'}$')
# scores = sex_score(Fold1) + sex_score(Fold2) + sex_score(Fold3) + sex_score(Fold4) + sex_score(Fold5)
# # print(scores)
# print(f'{np.mean(scores):.2f}'+'$_{\pm'+f'{np.std(scores):.2f}'+'}$')
# scores = age_mse(Fold1) + age_mse(Fold2) + age_mse(Fold3) + age_mse(Fold4) + age_mse(Fold5)
# # print(scores)
# print(f'{np.mean(scores):.2f}'+'$_{\pm'+f'{np.std(scores):.2f}'+'}$')



# def f(s):
#  x=s.split(' ')
#  avg=[]
#  std=[]
#  for l in x:
#   avg.append(float(l.split('±')[0]))
#   std.append(float(l.split('±')[1]))
 
#  print(f'{np.mean(avg):.2f}'+'$_{\pm'+f'{np.mean(std):.2f}'+'}$')

# dns = ['taowu', 'adni', 'ppmi', 'abide', 'neurocon']
# mns = ['braingnn', 'bolt', 'bnt', 'graphormer', 'nagphormer', 'neurodetour']
# for dn in dns:
#     logf = f'logs/none_{dn}_decoder88Mix_attrFC.log'
#     with open(logf, 'r') as f:
#         lines = f.read().split('\n')

#     folds = []
#     acc = None
#     for line in lines:
#         if line.startswith('Fold '): acc = []
#         if acc is None: continue
#         if line.startswith('Train loss: '):
#             float(line.split('sex-Accuracy: ')[1].split(',')[0])
#             acc.append()
# exit()

import os

sex_avg = {}
sex_std = {}
age_avg = {}
age_std = {}
for fn in os.listdir('logs'):
    if 'mlp1Mix' not in fn and 'SexAge' not in fn: continue
    with open(f'logs/{fn}', 'r') as logf:
        lines = logf.read().split('\n')
    if len(lines) < 3: continue
    if not lines[-2].startswith('Mean rec Score:'): continue
    if 'SexAge' in fn:
        mn = fn.split('_')[-2]
    else:
        mn = fn.split('_')[0]
    dn = fn.split('_')[1]
    sex_a = lines[-9][len('Mean F1 Score: '):].split(',')[0]
    age_a = lines[-4][len('Mean F1 Score: '):].split(',')[0]
    if sex_a == '-inf': continue
    sex_s = float(lines[-9].split(': ')[-1])
    age_s = float(lines[-4].split(': ')[-1])
    sex_a = float(sex_a)
    age_a = float(age_a)
    if mn not in sex_avg: 
        sex_avg[mn] = []
        sex_std[mn] = []
        age_avg[mn] = []
        age_std[mn] = []

    sex_avg[mn].append(sex_a*100)
    sex_std[mn].append(sex_s*100)
    age_avg[mn].append(np.sqrt(age_a*-1))
    age_std[mn].append(np.sqrt(age_s))
    print(f'{mn[:3]} \t {dn[:4]} \t {sex_avg[mn][-1]:.2f} \t {sex_std[mn][-1]:.2f} \t {age_avg[mn][-1]:.2f} \t {age_std[mn][-1]:.2f}')

for mn in sex_avg:
    # if len(sex_avg[mn]) != 7: continue
    print(mn)
    print(f'{np.mean(sex_avg[mn]):.2f}'+'$_{\pm'+f'{np.mean(sex_std[mn]):.2f}'+'}$', '&', f'{np.mean(age_avg[mn]):.2f}'+'$_{\pm'+f'{np.mean(age_std[mn]):.2f}'+'}$')

